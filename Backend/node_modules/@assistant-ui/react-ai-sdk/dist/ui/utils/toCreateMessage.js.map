{"version":3,"sources":["../../../src/ui/utils/toCreateMessage.ts"],"sourcesContent":["import { AppendMessage } from \"@assistant-ui/react\";\nimport {\n  CreateUIMessage,\n  generateId,\n  UIDataTypes,\n  UIMessage,\n  UIMessagePart,\n  UITools,\n} from \"ai\";\n\nexport const toCreateMessage = <UI_MESSAGE extends UIMessage = UIMessage>(\n  message: AppendMessage,\n): CreateUIMessage<UI_MESSAGE> => {\n  const inputParts = [\n    ...message.content.filter((c) => c.type !== \"file\"),\n    ...(message.attachments?.flatMap((a) =>\n      a.content.map((c) => ({\n        ...c,\n        filename: a.name,\n      })),\n    ) ?? []),\n  ];\n\n  const parts = inputParts.map((part): UIMessagePart<UIDataTypes, UITools> => {\n    switch (part.type) {\n      case \"text\":\n        return {\n          type: \"text\",\n          text: part.text,\n        };\n      case \"image\":\n        return {\n          type: \"file\",\n          url: part.image,\n          ...(part.filename && { filename: part.filename }),\n          mediaType: \"image/png\",\n        };\n      case \"file\":\n        return {\n          type: \"file\",\n          url: part.data,\n          mediaType: part.mimeType,\n          ...(part.filename && { filename: part.filename }),\n        };\n      default:\n        throw new Error(`Unsupported part type: ${part.type}`);\n    }\n  });\n\n  return {\n    id: generateId(),\n    role: message.role,\n    parts,\n  } satisfies CreateUIMessage<UIMessage> as CreateUIMessage<UI_MESSAGE>;\n};\n"],"mappings":";AACA;AAAA,EAEE;AAAA,OAKK;AAEA,IAAM,kBAAkB,CAC7B,YACgC;AAChC,QAAM,aAAa;AAAA,IACjB,GAAG,QAAQ,QAAQ,OAAO,CAAC,MAAM,EAAE,SAAS,MAAM;AAAA,IAClD,GAAI,QAAQ,aAAa;AAAA,MAAQ,CAAC,MAChC,EAAE,QAAQ,IAAI,CAAC,OAAO;AAAA,QACpB,GAAG;AAAA,QACH,UAAU,EAAE;AAAA,MACd,EAAE;AAAA,IACJ,KAAK,CAAC;AAAA,EACR;AAEA,QAAM,QAAQ,WAAW,IAAI,CAAC,SAA8C;AAC1E,YAAQ,KAAK,MAAM;AAAA,MACjB,KAAK;AACH,eAAO;AAAA,UACL,MAAM;AAAA,UACN,MAAM,KAAK;AAAA,QACb;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UACL,MAAM;AAAA,UACN,KAAK,KAAK;AAAA,UACV,GAAI,KAAK,YAAY,EAAE,UAAU,KAAK,SAAS;AAAA,UAC/C,WAAW;AAAA,QACb;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UACL,MAAM;AAAA,UACN,KAAK,KAAK;AAAA,UACV,WAAW,KAAK;AAAA,UAChB,GAAI,KAAK,YAAY,EAAE,UAAU,KAAK,SAAS;AAAA,QACjD;AAAA,MACF;AACE,cAAM,IAAI,MAAM,0BAA0B,KAAK,IAAI,EAAE;AAAA,IACzD;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,IAAI,WAAW;AAAA,IACf,MAAM,QAAQ;AAAA,IACd;AAAA,EACF;AACF;","names":[]}