{"version":3,"sources":["../../../src/ui/utils/vercelAttachmentAdapter.ts"],"sourcesContent":["import { AttachmentAdapter } from \"@assistant-ui/react\";\nimport { generateId } from \"ai\";\n\nconst getFileDataURL = (file: File) =>\n  new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n\n    reader.readAsDataURL(file);\n  });\n\nexport const vercelAttachmentAdapter: AttachmentAdapter = {\n  accept:\n    \"image/*, text/plain, text/html, text/markdown, text/csv, text/xml, text/json, text/css\",\n  async add({ file }) {\n    return {\n      id: generateId(),\n      type: file.type.startsWith(\"image/\") ? \"image\" : \"file\",\n      name: file.name,\n      file,\n      contentType: file.type,\n      content: [],\n      status: { type: \"requires-action\", reason: \"composer-send\" },\n    };\n  },\n  async send(attachment) {\n    // noop\n    return {\n      ...attachment,\n      status: { type: \"complete\" },\n      content: [\n        {\n          type: \"file\",\n          mimeType: attachment.contentType,\n          filename: attachment.name,\n          data: await getFileDataURL(attachment.file),\n        },\n      ],\n    };\n  },\n  async remove() {\n    // noop\n  },\n};\n"],"mappings":";AACA,SAAS,kBAAkB;AAE3B,IAAM,iBAAiB,CAAC,SACtB,IAAI,QAAgB,CAAC,SAAS,WAAW;AACvC,QAAM,SAAS,IAAI,WAAW;AAE9B,SAAO,SAAS,MAAM,QAAQ,OAAO,MAAgB;AACrD,SAAO,UAAU,CAAC,UAAU,OAAO,KAAK;AAExC,SAAO,cAAc,IAAI;AAC3B,CAAC;AAEI,IAAM,0BAA6C;AAAA,EACxD,QACE;AAAA,EACF,MAAM,IAAI,EAAE,KAAK,GAAG;AAClB,WAAO;AAAA,MACL,IAAI,WAAW;AAAA,MACf,MAAM,KAAK,KAAK,WAAW,QAAQ,IAAI,UAAU;AAAA,MACjD,MAAM,KAAK;AAAA,MACX;AAAA,MACA,aAAa,KAAK;AAAA,MAClB,SAAS,CAAC;AAAA,MACV,QAAQ,EAAE,MAAM,mBAAmB,QAAQ,gBAAgB;AAAA,IAC7D;AAAA,EACF;AAAA,EACA,MAAM,KAAK,YAAY;AAErB,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,EAAE,MAAM,WAAW;AAAA,MAC3B,SAAS;AAAA,QACP;AAAA,UACE,MAAM;AAAA,UACN,UAAU,WAAW;AAAA,UACrB,UAAU,WAAW;AAAA,UACrB,MAAM,MAAM,eAAe,WAAW,IAAI;AAAA,QAC5C;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,MAAM,SAAS;AAAA,EAEf;AACF;","names":[]}