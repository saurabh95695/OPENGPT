{"version":3,"sources":["../../../../src/context/react/hooks/useAssistantState.tsx"],"sourcesContent":["import { useMemo, useSyncExternalStore, useDebugValue } from \"react\";\nimport {\n  AssistantState,\n  AssistantApi,\n  useAssistantApi,\n} from \"../AssistantApiContext\";\n\nclass ProxiedAssistantState implements AssistantState {\n  #api: AssistantApi;\n  constructor(api: AssistantApi) {\n    this.#api = api;\n  }\n\n  get threads() {\n    return this.#api.threads().getState();\n  }\n\n  get toolUIs() {\n    return this.#api.toolUIs().getState();\n  }\n\n  get threadListItem() {\n    return this.#api.threadListItem().getState();\n  }\n\n  get thread() {\n    return this.#api.thread().getState();\n  }\n\n  get composer() {\n    return this.#api.composer().getState();\n  }\n\n  get message() {\n    return this.#api.message().getState();\n  }\n\n  get part() {\n    return this.#api.part().getState();\n  }\n\n  get attachment() {\n    return this.#api.attachment().getState();\n  }\n}\n\nexport const useAssistantState = <T,>(\n  selector: (state: AssistantState) => T,\n): T => {\n  const api = useAssistantApi();\n  const proxiedState = useMemo(() => new ProxiedAssistantState(api), [api]);\n  const slice = useSyncExternalStore(\n    api.subscribe,\n    () => selector(proxiedState),\n    () => selector(proxiedState),\n  );\n  useDebugValue(slice);\n\n  if (slice instanceof ProxiedAssistantState)\n    throw new Error(\n      \"You tried to return the entire AssistantState. This is not supported due to technical limitations.\",\n    );\n\n  return slice;\n};\n"],"mappings":";AAAA,SAAS,SAAS,sBAAsB,qBAAqB;AAC7D;AAAA,EAGE;AAAA,OACK;AAEP,IAAM,wBAAN,MAAsD;AAAA,EACpD;AAAA,EACA,YAAY,KAAmB;AAC7B,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,KAAK,QAAQ,EAAE,SAAS;AAAA,EACtC;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,KAAK,QAAQ,EAAE,SAAS;AAAA,EACtC;AAAA,EAEA,IAAI,iBAAiB;AACnB,WAAO,KAAK,KAAK,eAAe,EAAE,SAAS;AAAA,EAC7C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,KAAK,OAAO,EAAE,SAAS;AAAA,EACrC;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK,KAAK,SAAS,EAAE,SAAS;AAAA,EACvC;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,KAAK,QAAQ,EAAE,SAAS;AAAA,EACtC;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK,KAAK,KAAK,EAAE,SAAS;AAAA,EACnC;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,KAAK,KAAK,WAAW,EAAE,SAAS;AAAA,EACzC;AACF;AAEO,IAAM,oBAAoB,CAC/B,aACM;AACN,QAAM,MAAM,gBAAgB;AAC5B,QAAM,eAAe,QAAQ,MAAM,IAAI,sBAAsB,GAAG,GAAG,CAAC,GAAG,CAAC;AACxE,QAAM,QAAQ;AAAA,IACZ,IAAI;AAAA,IACJ,MAAM,SAAS,YAAY;AAAA,IAC3B,MAAM,SAAS,YAAY;AAAA,EAC7B;AACA,gBAAc,KAAK;AAEnB,MAAI,iBAAiB;AACnB,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AAEF,SAAO;AACT;","names":[]}