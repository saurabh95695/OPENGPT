{"version":3,"sources":["../../../src/utils/tap-store/store.ts"],"sourcesContent":["import {\n  tapMemo,\n  tapEffect,\n  ResourceElement,\n  resource,\n  createResource,\n  Unsubscribe,\n} from \"@assistant-ui/tap\";\n\nexport interface Store<TState> {\n  /**\n   * Get the current state of the store.\n   */\n  getState(): TState;\n\n  /**\n   * Subscribe to the store.\n   */\n  subscribe(listener: () => void): Unsubscribe;\n\n  /**\n   * Synchronously flush all the updates to the store.\n   */\n  flushSync(): void;\n}\n\nexport const asStore = resource(\n  <TState, TProps>(element: ResourceElement<TState, TProps>): Store<TState> => {\n    const resource = tapMemo(\n      () => createResource(element, true),\n      [element.type],\n    );\n\n    tapEffect(() => {\n      resource.updateInput(element.props);\n    });\n\n    return resource;\n  },\n);\n"],"mappings":";AAAA;AAAA,EACE;AAAA,EACA;AAAA,EAEA;AAAA,EACA;AAAA,OAEK;AAmBA,IAAM,UAAU;AAAA,EACrB,CAAiB,YAA4D;AAC3E,UAAMA,YAAW;AAAA,MACf,MAAM,eAAe,SAAS,IAAI;AAAA,MAClC,CAAC,QAAQ,IAAI;AAAA,IACf;AAEA,cAAU,MAAM;AACd,MAAAA,UAAS,YAAY,QAAQ,KAAK;AAAA,IACpC,CAAC;AAED,WAAOA;AAAA,EACT;AACF;","names":["resource"]}