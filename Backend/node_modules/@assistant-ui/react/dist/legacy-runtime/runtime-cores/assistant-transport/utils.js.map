{"version":3,"sources":["../../../../src/legacy-runtime/runtime-cores/assistant-transport/utils.ts"],"sourcesContent":["import { Tool } from \"assistant-stream\";\nimport { JSONSchema7 } from \"json-schema\";\nimport { z } from \"zod\";\n\n// Convert tools to AI SDK format\nexport const toAISDKTools = (tools: Record<string, Tool>) => {\n  return Object.fromEntries(\n    Object.entries(tools).map(([name, tool]) => [\n      name,\n      {\n        ...(tool.description ? { description: tool.description } : undefined),\n        parameters: (tool.parameters instanceof z.ZodType\n          ? z.toJSONSchema(tool.parameters)\n          : tool.parameters) as JSONSchema7,\n      },\n    ]),\n  );\n};\n\n// Filter enabled tools\nexport const getEnabledTools = (tools: Record<string, Tool>) => {\n  return Object.fromEntries(\n    Object.entries(tools).filter(\n      ([, tool]) => !tool.disabled && tool.type !== \"backend\",\n    ),\n  );\n};\n\n// Create headers for fetch request\nexport const createRequestHeaders = async (\n  headersValue:\n    | Record<string, string>\n    | Headers\n    | (() => Promise<Record<string, string> | Headers>),\n): Promise<Headers> => {\n  const resolvedHeaders =\n    typeof headersValue === \"function\" ? await headersValue() : headersValue;\n\n  const headers = new Headers(resolvedHeaders);\n  headers.set(\"Content-Type\", \"application/json\");\n  return headers;\n};\n"],"mappings":";AAEA,SAAS,SAAS;AAGX,IAAM,eAAe,CAAC,UAAgC;AAC3D,SAAO,OAAO;AAAA,IACZ,OAAO,QAAQ,KAAK,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,GAAI,KAAK,cAAc,EAAE,aAAa,KAAK,YAAY,IAAI;AAAA,QAC3D,YAAa,KAAK,sBAAsB,EAAE,UACtC,EAAE,aAAa,KAAK,UAAU,IAC9B,KAAK;AAAA,MACX;AAAA,IACF,CAAC;AAAA,EACH;AACF;AAGO,IAAM,kBAAkB,CAAC,UAAgC;AAC9D,SAAO,OAAO;AAAA,IACZ,OAAO,QAAQ,KAAK,EAAE;AAAA,MACpB,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,KAAK,YAAY,KAAK,SAAS;AAAA,IAChD;AAAA,EACF;AACF;AAGO,IAAM,uBAAuB,OAClC,iBAIqB;AACrB,QAAM,kBACJ,OAAO,iBAAiB,aAAa,MAAM,aAAa,IAAI;AAE9D,QAAM,UAAU,IAAI,QAAQ,eAAe;AAC3C,UAAQ,IAAI,gBAAgB,kBAAkB;AAC9C,SAAO;AACT;","names":[]}